# @optimizely/sdk-plugin-pending-events

An [`EventDispatcher`](https://developers.optimizely.com/x/solutions/sdks/reference/index.html?language=javascript#event-dispatcher) for Optimizely FullStack ([`javascript-sdk`](https://github.com/optimizely/javascript-sdk), Web browser environment)
that keeps a queue of pending (not completed) events and persist to localStorage. This allows us to retry events that are canceled by e.g. a page unload.

## Install

```sh
npm install @optimizely/sdk-plugin-pending-events
```

## Usage

See [`example`](./example) for an example of how this is used:

```sh
$ cd example
$ npm install
$ npm start
```

Load index.html in browser of your choice.

### API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### index

[src/index.js:63-84](https://github.com/optimizely/javascript-sdk-plugin-pending-events/blob/68dfb0a2c5e60c041a6b0e2964316bcbe3c43242/src/index.js#L63-L84 "Source code on GitHub")

Construct an EventDispatcher compatible with @optimizely/optimizely-sdk

**Parameters**

-   `localStorageKey` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Key under which to persist/load pending events in `window.localStorage`
-   `logger` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)?** 

Returns **EventDispatcher** An object with a dispatchEvent method, suitable for use as an EventDispatcher
